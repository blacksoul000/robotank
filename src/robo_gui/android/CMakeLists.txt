set (ROSCPP_DIR /opt/roscpp_output) #FIXME
set (ROSCPP_ANDROID_DIR ${ROSCPP_DIR}/roscpp_android_ndk)

set (LIBS
  cv_bridge
  roscpp
  rosconsole
  image_transport
  message_filters
  tinyxml
  xmlrpcpp
  roslib
  roscpp_serialization
  cpp_common
  console_bridge
  rostime
  compressed_image_transport
  class_loader
  rospack
  rosconsole_print
  rosconsole_backend_interface
  boost_system 
  boost_signals 
  boost_filesystem 
  boost_thread 
  boost_date_time 
  boost_regex
  boost_program_options
  PocoFoundation
  opencv_core
  opencv_highgui
  opencv_imgproc
)

include(${CMAKE_CURRENT_SOURCE_DIR}/../../../cmake/RecurseDirs.cmake)
HEADER_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../src/ DIRS)

file(GLOB_RECURSE HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/../src/*.h)
file(GLOB_RECURSE SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/../src/*.cpp)
file(GLOB_RECURSE RESOURCES ${CMAKE_CURRENT_SOURCE_DIR}/../src/*.qrc)

string(REPLACE ";" " " ANDROID_DIRS "${DIRS}")
string(REPLACE ";" " " ANDROID_SRCS "${SOURCES}")
string(REPLACE ";" " " ANDROID_HDRS "${HEADERS}")
string(REPLACE ";" " " ANDROID_QRCS "${RESOURCES}")
string(REPLACE ";" " -l" ANDROID_LIBS "${LIBS}")

file(WRITE android.pro
"#Don't edit! This file is automatically generated by CMakeLists.txt!

OBJECTS_DIR = ${CMAKE_CURRENT_BINARY_DIR}
MOC_DIR = ${CMAKE_CURRENT_BINARY_DIR}
RCC_DIR = ${CMAKE_CURRENT_BINARY_DIR}

TEMPLATE = app
TARGET = ${CMAKE_CURRENT_BINARY_DIR}/robotank

INCLUDEPATH += . ${ANDROID_DIRS}
HEADERS += . ${ANDROID_HDRS}
SOURCES += ${ANDROID_SRCS}
RESOURCES += ${ANDROID_QRCS}

QT += core gui quick multimedia

INCLUDEPATH += ${ROSCPP_ANDROID_DIR}/include ${CATKIN_DEVEL_PREFIX}/include
LIBS += -L${ROSCPP_ANDROID_DIR}/lib -l${ANDROID_LIBS}
")
